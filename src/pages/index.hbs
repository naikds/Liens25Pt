
<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>5×5 ライン到達ゲーム（両端伸長 / 直進2マス=各1回 / 斜めON）</title>
<style>
  :root {
    --bg:#f7f7fb; --panel:#fff; --grid:#cbd5e1; --dot:#475569;
    --red:#e74c3c; --blue:#3498db; --green:#2ecc71; --text:#0f172a;
    --amber:#f59e0b;
  }
  body{ margin:0; padding:24px; background:var(--bg); color:var(--text);
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Hiragino Kaku Gothic ProN", "Noto Sans JP", "Yu Gothic", "Meiryo", sans-serif; }
  h1{ font-size:18px; margin:0 0 12px; }
  .container{ display:grid; grid-template-columns:1fr 340px; gap:16px; align-items:start; }
  .board-wrap,.panel{ background:var(--panel); border-radius:12px; box-shadow:0 6px 18px rgba(15,23,42,.08); }
  .board-wrap{ padding:12px; }
  canvas{ display:block; width:100%; height:auto; border-radius:10px; background:#fff; cursor:pointer; }
  .panel{ padding:16px; }
  .row{ margin-bottom:12px; }
  .row label{ display:block; font-size:14px; margin:6px 0; }
  .status{ padding:10px 12px; border-radius:8px; background:#f1f5f9; font-size:14px; }
  .btns button{ margin-right:8px; margin-bottom:8px; padding:8px 12px; font-size:14px; border-radius:8px; border:1px solid #e2e8f0; background:#fff; cursor:pointer; }
  .btns button:hover{ background:#f8fafc; }
  .legend{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; font-size:13px; color:#334155; }
  .chip{ display:inline-flex; align-items:center; gap:6px; }
  .dot{ width:10px; height:10px; border-radius:50%; display:inline-block; }
  .dot.red{ background:var(--red); }
  .dot.blue{ background:var(--blue); }
  .dot.green{ background:var(--green); }
  .note{ font-size:12px; color:#64748b; line-height:1.5; }
  .counter{ font-size:13px; color:#0f172a; background:#f1f5f9; border-radius:8px; padding:8px; }
  .counter strong{ color:#111827; }
</style>
</head>
<body>
<div class="container">
  <div class="board-wrap">
    <h1>5×5 ライン到達ゲーム（両端伸長 / 直進2マス=各1回 / 斜めON）</h1>
    <canvas id="board" width="680" height="680"></canvas>
  </div>
  <div class="panel" role="complementary">
    <div class="row status" id="status">先手（赤）の初手：下段のいずれかの点から開始してください</div>

    <div class="row legend">
      <span class="chip"><span class="dot red"></span>先手（下段→上段）</span>
      <span class="chip"><span class="dot blue"></span>後手（上段→下段）</span>
      <span class="chip"><span class="dot green"></span>合法手</span>
    </div>

    <div class="row counter" id="counterBox">
      直進2マス 残り：
      <strong>先手 <span id="p1ds">1</span></strong> /
      <strong>後手 <span id="p2ds">1</span></strong>
    </div>

    <div class="row">
      <strong>設定</strong>
      <label><input type="checkbox" id="allowDiagonals" checked /> 斜め移動を許可する（1マス）</label>
      <label><input type="checkbox" id="showHints" checked /> 合法手をハイライト表示</label>
      <label><input type="checkbox" id="forbidCross" checked /> 線の交差（真の交差/重なり）を禁止する</label>
      <label><input type="checkbox" id="forbidReusePoint" checked /> 使った点の再使用を禁止する</label>
      <label><input type="checkbox" id="debugWhy" /> デバッグ：不正理由を表示</label>
    </div>

    <div class="row btns">
      <button id="undoBtn">一手戻す</button>
      <button id="resetBtn">リセット</button>
      <button id="swapSidesBtn">サイド入れ替え（上下反転）</button>
      <button id="clearSelBtn">選択解除（ESC）</button>
    </div>

    <div class="row note">
      <div>✔ 初手は自陣の端（先手＝下段、後手＝上段）から開始。</div>
      <div>✔ 2手目以降、<strong>自分の線の両端のどちらからでも</strong>伸ばせます（両端伸長）。</div>
      <div>✔ <strong>直進2マス</strong>：各プレイヤー<strong>ゲーム中1回のみ</strong>。後手は初手から可／先手は初手のみ不可、以降は可（斜め2マスは不可）。</div>
      <div>✔ 斜めは<strong>1マスのみ</strong>可（デフォルトON）。</div>
      <div>✔ 点の再使用不可。線の<strong>真の交差/重なり</strong>だけ禁止（近接はOK）。</div>
      <div>✔ 勝利：自分の線の<strong>どちらかの端</strong>が相手側最前列に到達したら勝利。合法手ゼロは敗北。</div>
    </div>
  </div>
</div>

<!-- 分割した JS を読み込み -->
<script src="js/game.js"></script>
</body>
</html>
``
